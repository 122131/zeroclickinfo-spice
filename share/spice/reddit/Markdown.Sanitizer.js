(function(){function h(a){if(a=="")return"";var b=/<\/?\w+[^>]*(\s|$|>)/g;var c=a.toLowerCase().match(b);var d=(c||[]).length;if(d==0)return a;var e,f;var g="<p><img><br><li><hr>";var h;var i=[];var j=[];var k=false;for(var l=0;l<d;l++){e=c[l].replace(/<\/?(\w+).*/,"$1");if(i[l]||g.search("<"+e+">")>-1)continue;f=c[l];h=-1;if(!/^<\//.test(f)){for(var m=l+1;m<d;m++){if(!i[m]&&c[m]=="</"+e+">"){h=m;break}}}if(h==-1)k=j[l]=true;else i[h]=true}if(!k)return a;var l=0;a=a.replace(b,function(a){var b=j[l]?"":a;l++;return b});return a}function g(a){if(a.match(d)||a.match(e)||a.match(f))return a;else return""}function c(a){return a.replace(/<[^>]*>?/gi,g)}var a,b;if(typeof exports==="object"&&typeof require==="function"){a=exports;b=require("./Markdown.Converter").Converter}else{a=window.Markdown;b=a.Converter}a.getSanitizingConverter=function(){var a=new b;a.hooks.chain("postConversion",c);a.hooks.chain("postConversion",h);return a};var d=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i;var e=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i;var f=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i})()