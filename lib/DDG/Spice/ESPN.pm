package DDG::Spice::ESPN;

use DDG::Spice;
use Time::localtime;

attribution web => ['http://dylansserver.com','Dylan Lloyd'],
            email => ['dylan@dylansserver.com','Dylan Lloyd'];

my %nbaPlayers = (
    "quincy acy" => 6576,
    "jeff adrien" => 4335,
    "arron afflalo" => 3187,
    "blake ahearn" => 3402,
    "solomon alabi" => 4268,
    "cole aldrich" => 4267,
    "lamarcus aldridge" => 2983,
    "lavoy allen" => 6424,
    "ray allen" => 9,
    "tony allen" => 2367,
    "morris almond" => 3188,
    "al-farouq aminu" => 4248,
    "louis amundson" => 3041,
    "chris andersen" => 1135,
    "david andersen" => 4205,
    "alan anderson" => 6569,
    "james anderson" => 4242,
    "ryan anderson" => 3412,
    "carmelo anthony" => 1975,
    "joel anthony" => 3247,
    "gilbert arenas" => 974,
    "trevor ariza" => 2426,
    "darrell arthur" => 3413,
    "omer asik" => 3414,
    "d.j. augustin" => 3415,
    "gustavo ayon" => 6546,
    "kelenna azubuike" => 2821,
    "luke babbitt" => 4250,
    "renaldo balkman" => 2986,
    "leandro barbosa" => 2166,
    "jose juan barea" => 3055,
    "andrea bargnani" => 2987,
    "harrison barnes" => 6578,
    "matt barnes" => 1765,
    "earl barron" => 2477,
    "will barton" => 6579,
    "brandon bass" => 2745,
    "tony battie" => 45,
    "shane battier" => 976,
    "nicolas batum" => 3416,
    "jerryd bayless" => 3417,
    "kent bazemore" => 6637,
    "bradley beal" => 6580,
    "michael beasley" => 3418,
    "rodrigue beaubois" => 3963,
    "marco belinelli" => 3190,
    "raja bell" => 49,
    "keith benson" => 6425,
    "mike bibby" => 61,
    "andris biedrins" => 2427,
    "chauncey billups" => 63,
    "bismack biyombo" => 6427,
    "dejuan blair" => 3965,
    "steve blake" => 1994,
    "andray blatche" => 2746,
    "eric bledsoe" => 4238,
    "keith bogans" => 1995,
    "andrew bogut" => 2747,
    "matt bonner" => 1996,
    "trevor booker" => 4270,
    "carlos boozer" => 1703,
    "chris bosh" => 1977,
    "earl boykins" => 87,
    "craig brackins" => 4254,
    "avery bradley" => 4240,
    "elton brand" => 91,
    "corey brewer" => 3191,
    "ronnie brewer" => 2991,
    "jon brockman" => 3966,
    "aaron brooks" => 3192,
    "marshon brooks" => 6428,
    "derrick brown" => 3967,
    "gilbert brown" => 6514,
    "kwame brown" => 981,
    "shannon brown" => 2992,
    "kobe bryant" => 110,
    "chase budinger" => 3968,
    "alec burks" => 6429,
    "caron butler" => 1705,
    "jimmy butler" => 6430,
    "rasual butler" => 1767,
    "derrick byars" => 3193,
    "andrew bynum" => 2748,
    "will bynum" => 2816,
    "jose calderon" => 2806,
    "marcus camby" => 125,
    "brian cardinal" => 130,
    "demarre carroll" => 3970,
    "matt carroll" => 2211,
    "anthony carter" => 137,
    "vince carter" => 136,
    "omri casspi" => 3554,
    "mario chalmers" => 3419,
    "tyson chandler" => 984,
    "wilson chandler" => 3194,
    "josh childress" => 2373,
    "dionte christmas" => 4025,
    "earl clark" => 3971,
    "victor claver" => 3972,
    "norris cole" => 6431,
    "jason collins" => 987,
    "darren collison" => 3973,
    "nick collison" => 1978,
    "nando colo" => 3977,
    "mike conley" => 3195,
    "brian cook" => 1998,
    "daequan cook" => 3196,
    "chris copeland" => 6635,
    "demarcus cousins" => 4258,
    "jamal crawford" => 165,
    "jordan crawford" => 4243,
    "jae crowder" => 6581,
    "dante cunningham" => 3974,
    "jared cunningham" => 6582,
    "eddy curry" => 990,
    "jameson curry" => 3198,
    "stephen curry" => 3975,
    "samuel dalembert" => 991,
    "erick dampier" => 181,
    "marquis daniels" => 2200,
    "anthony davis" => 6583,
    "baron davis" => 194,
    "ed davis" => 4259,
    "glen davis" => 3200,
    "josh davis" => 2212,
    "eric dawson" => 6555,
    "austin daye" => 3976,
    "carlos delfino" => 1999,
    "luol deng" => 2429,
    "marcus denmon" => 6584,
    "justin dentmon" => 6483,
    "demar derozan" => 3978,
    "boris diaw" => 2167,
    "ike diogu" => 2750,
    "desagana diop" => 992,
    "keyon dooling" => 209,
    "toney douglas" => 3979,
    "goran dragic" => 3423,
    "tadija dragicevic" => 3424,
    "andre drummond" => 6585,
    "jared dudley" => 3201,
    "chris duhon" => 2377,
    "tim duncan" => 215,
    "mike dunleavy" => 1708,
    "kevin durant" => 3202,
    "jerome dyson" => 4320,
    "devin ebanks" => 4256,
    "moses ehambe" => 6521,
    "wayne ellington" => 3981,
    "monta ellis" => 2751,
    "francisco elson" => 234,
    "melvin ely" => 1709,
    "andre emmett" => 2431,
    "kim english" => 6586,
    "semih erden" => 3425,
    "michael eric" => 6640,
    "jeremy evans" => 4295,
    "maurice evans" => 1031,
    "reggie evans" => 1828,
    "tyreke evans" => 3983,
    "christian eyenga" => 3984,
    "festus ezeli" => 6587,
    "jarrid famous" => 6486,
    "kenneth faried" => 6433,
    "jordan farmar" => 3002,
    "derrick favors" => 4257,
    "raymond felton" => 2753,
    "rudy fernandez" => 3204,
    "kyrylo fesenko" => 3205,
    "landry fields" => 4274,
    "derek fisher" => 246,
    "gary flowers" => 6487,
    "jonny flynn" => 3985,
    "jeff foote" => 6558,
    "gary forbes" => 4312,
    "t.j. ford" => 1979,
    "courtney fortson" => 6541,
    "jeff foster" => 250,
    "shan foster" => 3427,
    "evan fournier" => 6588,
    "randy foye" => 3003,
    "jimmer fredette" => 6434,
    "joel freeland" => 3004,
    "channing frye" => 2754,
    "dan gadzuric" => 1710,
    "sundiata gaines" => 4224,
    "danilo gallinari" => 3428,
    "francisco garcia" => 2755,
    "kevin garnett" => 261,
    "marc gasol" => 3206,
    "pau gasol" => 996,
    "rudy gay" => 3005,
    "alonzo gee" => 4232,
    "paul george" => 4251,
    "daniel gibson" => 3006,
    "taj gibson" => 3986,
    "manu ginobili" => 272,
    "mickell gladness" => 4329,
    "ryan gomes" => 2757,
    "drew gooden" => 1711,
    "ben gordon" => 2381,
    "eric gordon" => 3431,
    "marcin gortat" => 2758,
    "andrew goudelock" => 6435,
    "stephen graham" => 2832,
    "danny granger" => 2760,
    "aaron gray" => 3207,
    "daniel green" => 3988,
    "devin green" => 2886,
    "draymond green" => 6589,
    "gerald green" => 2761,
    "jeff green" => 3209,
    "willie green" => 2004,
    "donte greene" => 3432,
    "blake griffin" => 3989,
    "taylor griffin" => 3990,
    "hamed haddadi" => 3478,
    "brian hamilton" => 3847,
    "jordan hamilton" => 6436,
    "justin hamilton" => 6590,
    "richard hamilton" => 294,
    "tyler hansbrough" => 3991,
    "luke harangody" => 4276,
    "james harden" => 3992,
    "moe harkless" => 6591,
    "justin harper" => 6438,
    "josh harrellson" => 6439,
    "al harrington" => 308,
    "devin harris" => 2382,
    "manny harris" => 4360,
    "terrel harris" => 6490,
    "tobias harris" => 6440,
    "udonis haslem" => 2184,
    "frank hassell" => 6491,
    "spencer hawes" => 3211,
    "chuck hayes" => 2834,
    "gordon hayward" => 4249,
    "lazar hayward" => 4277,
    "brendan haywood" => 1000,
    "gerald henderson" => 3993,
    "xavier henry" => 4241,
    "john henson" => 6592,
    "roy hibbert" => 3436,
    "j.j. hickson" => 3437,
    "cory higgins" => 6544,
    "george hill" => 3438,
    "grant hill" => 336,
    "jordan hill" => 3994,
    "lawrence hill" => 6492,
    "kirk hinrich" => 1981,
    "darington hobson" => 4278,
    "jrue holiday" => 3995,
    "ryan hollins" => 3008,
    "tyler honeycutt" => 6441,
    "antoine hood" => 3074,
    "al horford" => 3213,
    "dennis horner" => 6527,
    "dwight howard" => 2384,
    "josh howard" => 2006,
    "juwan howard" => 351,
    "marcus hubbard" => 3856,
    "lester hudson" => 3996,
    "larry hughes" => 356,
    "robbie hummel" => 6633,
    "kris humphries" => 2433,
    "serge ibaka" => 3439,
    "andre iguodala" => 2386,
    "ersan ilyasova" => 2767,
    "kyrie irving" => 6442,
    "royal ivey" => 2387,
    "jarrett jack" => 2768,
    "reggie jackson" => 6443,
    "stephen jackson" => 378,
    "bernard james" => 6593,
    "damion james" => 4252,
    "lebron james" => 1966,
    "mike james" => 1051,
    "antawn jamison" => 385,
    "al jefferson" => 2389,
    "richard jefferson" => 1006,
    "jared jeffries" => 1717,
    "charles jenkins" => 6444,
    "john jenkins" => 6594,
    "brandon jennings" => 3997,
    "jonas jerebko" => 3998,
    "yi jianlian" => 3214,
    "amir johnson" => 2769,
    "armon johnson" => 4279,
    "carldell johnson" => 6484,
    "chris johnson" => 4400,
    "ivan johnson" => 6534,
    "jajuan johnson" => 6445,
    "james johnson" => 3999,
    "joe johnson" => 1007,
    "orlando johnson" => 6595,
    "trey johnson" => 3256,
    "tyren johnson" => 6493,
    "wesley johnson" => 4247,
    "darius johnson-odom" => 6596,
    "dahntay jones" => 2008,
    "dominique jones" => 4246,
    "james jones" => 2009,
    "perry jones" => 6598,
    "solomon jones" => 3010,
    "terrence jones" => 6597,
    "deandre jordan" => 3442,
    "jerome jordan" => 4280,
    "cory joseph" => 6446,
    "kris joseph" => 6599,
    "chris kaman" => 1982,
    "enes kanter" => 6447,
    "jason kapono" => 2010,
    "ilkan karaman" => 6600,
    "d.j. kennedy" => 6574,
    "julian khazzouh" => 6516,
    "jason kidd" => 429,
    "michael kidd-gilchrist" => 6601,
    "andrei kirilenko" => 434,
    "linas kleiza" => 2770,
    "brandon knight" => 6448,
    "kyle korver" => 2011,
    "kosta koufos" => 3444,
    "slava kravtsov" => 6636,
    "ognjen kuzmic" => 6602,
    "doron lamb" => 6604,
    "jeremy lamb" => 6603,
    "carl landry" => 3217,
    "marcus landry" => 4024,
    "gani lawal" => 4281,
    "ty lawson" => 4000,
    "darnell lazare" => 6495,
    "courtney lee" => 3445,
    "david lee" => 2772,
    "malcolm lee" => 6449,
    "kawhi leonard" => 6450,
    "meyers leonard" => 6605,
    "travis leslie" => 6451,
    "jon leuer" => 6452,
    "rashard lewis" => 469,
    "deandre liggins" => 6453,
    "damian lillard" => 6606,
    "jeremy lin" => 4299,
    "shaun livingston" => 2393,
    "brook lopez" => 3448,
    "robin lopez" => 3447,
    "kevin love" => 3449,
    "kyle lowry" => 3012,
    "john lucas" => 2866,
    "shelvin mack" => 6454,
    "vernon macklin" => 6455,
    "corey maggette" => 497,
    "jamaal magloire" => 498,
    "ian mahinmi" => 2774,
    "shawn marion" => 510,
    "kendall marshall" => 6607,
    "cartier martin" => 3930,
    "kenyon martin" => 515,
    "kevin martin" => 2394,
    "roger mason" => 1721,
    "wesley matthews" => 4032,
    "jason maxiell" => 2775,
    "eric maynor" => 4001,
    "o.j. mayo" => 3450,
    "luc richard mbah a moute" => 3451,
    "javale mcgee" => 3452,
    "tracy mcgrady" => 532,
    "dominic mcguire" => 3246,
    "josh mcroberts" => 3220,
    "jodie meeks" => 4003,
    "fab melo" => 6608,
    "khris middleton" => 6609,
    "c.j. miles" => 2778,
    "darko milicic" => 2171,
    "andre miller" => 557,
    "brad miller" => 556,
    "darius miller" => 6610,
    "mike miller" => 558,
    "quincy miller" => 6611,
    "patrick mills" => 4004,
    "paul millsap" => 3015,
    "tommy mitchell" => 6517,
    "nazr mohammed" => 568,
    "greg monroe" => 4260,
    "jamario moon" => 3249,
    "e'twaun moore" => 6460,
    "mikki moore" => 575,
    "darius morris" => 6463,
    "marcus morris" => 6462,
    "markieff morris" => 6461,
    "anthony morrow" => 3474,
    "donatas motiejunas" => 6464,
    "arnett moultrie" => 6612,
    "timofey mozgov" => 4298,
    "ismail muhammad" => 6536,
    "byron mullens" => 4005,
    "kevin murphy" => 6613,
    "troy murphy" => 1013,
    "eduardo najera" => 591,
    "steve nash" => 592,
    "hamady ndiaye" => 4282,
    "gary neal" => 4300,
    "drew neitzel" => 6505,
    "jameer nelson" => 2439,
    "  nene" => 1713,
    "andrew nicholson" => 6614,
    "joakim noah" => 3224,
    "andres nocioni" => 2456,
    "steve novak" => 3018,
    "dirk nowitzki" => 609,
    "jermaine o'neal" => 615,
    "kyle o'quinn" => 6615,
    "lamar odom" => 617,
    "emeka okafor" => 2399,
    "mehmet okur" => 1014,
    "adrian oliver" => 6496,
    "daniel orton" => 4263,
    "travis outlaw" => 2015,
    "larry owens" => 4179,
    "zaza pachulia" => 2016,
    "jannero pargo" => 1821,
    "jeremy pargo" => 6497,
    "anthony parker" => 635,
    "tony parker" => 1015,
    "chandler parsons" => 6466,
    "patrick patterson" => 4264,
    "chris paul" => 2779,
    "sasha pavlovic" => 2172,
    "nikola pekovic" => 3453,
    "jeff pendergraph" => 4008,
    "kendrick perkins" => 2018,
    "johan petro" => 2780,
    "tim pickett" => 2440,
    "paul pierce" => 662,
    "mickael pietrus" => 2173,
    "dexter pittman" => 4283,
    "miles plumlee" => 6616,
    "quincy pondexter" => 4253,
    "a.j. price" => 4010,
    "ronnie price" => 2807,
    "pablo prigioni" => 4182,
    "tayshaun prince" => 1724,
    "joel przybilla" => 682,
    "vladimir radmanovic" => 1016,
    "jerome randle" => 6512,
    "anthony randolph" => 3455,
    "zach randolph" => 1017,
    "michael redd" => 692,
    "j.j. redick" => 3024,
    "ryan reid" => 4286,
    "jason richardson" => 1018,
    "quentin richardson" => 703,
    "luke ridnour" => 1985,
    "austin rivers" => 6617,
    "brian roberts" => 6641,
    "nate robinson" => 2782,
    "thomas robinson" => 6618,
    "matt rogers" => 4333,
    "magnum rolle" => 4288,
    "rajon rondo" => 3026,
    "derrick rose" => 3456,
    "terrence ross" => 6619,
    "brandon roy" => 3027,
    "ricky rubio" => 4011,
    "brandon rush" => 3457,
    "walker russell" => 6526,
    "robert sacre" => 6620,
    "john salmons" => 1726,
    "jamal sampson" => 1780,
    "samardo samuels" => 4304,
    "larry sanders" => 4265,
    "tomas satoransky" => 6621,
    "brian scalabrine" => 1021,
    "luis scola" => 1781,
    "mike scott" => 6622,
    "thabo sefolosha" => 3028,
    "josh selby" => 6467,
    "kevin seraphin" => 4289,
    "ramon sessions" => 3231,
    "walter sharpe" => 3458,
    "tornike shengelia" => 6623,
    "iman shumpert" => 6468,
    "alexey shved" => 3882,
    "xavier silas" => 6499,
    "garret siler" => 4035,
    "bobby simmons" => 1022,
    "diamon simpson" => 4036,
    "kyle singler" => 6469,
    "chris singleton" => 6470,
    "james singleton" => 2873,
    "brian skinner" => 779,
    "donald sloan" => 4303,
    "chris smith" => 6639,
    "craig smith" => 3031,
    "greg smith" => 6530,
    "gregory smith" => 6076,
    "ishmael smith" => 4305,
    "j.r. smith" => 2444,
    "jamar smith" => 3118,
    "jason smith" => 3232,
    "jerry smith" => 6528,
    "josh smith" => 2411,
    "nolan smith" => 6471,
    "tommy smith" => 2023,
    "marreese speights" => 3460,
    "tiago splitter" => 3233,
    "jerry stackhouse" => 802,
    "lance stephenson" => 4244,
    "deshawn stevenson" => 808,
    "greg stiemsma" => 4235,
    "julyan stone" => 6543,
    "amare stoudemire" => 1727,
    "rodney stuckey" => 3235,
    "jared sullinger" => 6624,
    "dajuan summers" => 4012,
    "durrell summers" => 6535,
    "michael sweetney" => 2175,
    "pape sy" => 4290,
    "jeffery taylor" => 6156,
    "tyshawn taylor" => 6625,
    "jeff teague" => 4015,
    "marquis teague" => 6626,
    "mirza teletovic" => 4385,
    "sebastian telfair" => 2417,
    "jason terry" => 841,
    "hasheem thabeet" => 4016,
    "doug thomas" => 3319,
    "isaiah thomas" => 6472,
    "kurt thomas" => 846,
    "lance thomas" => 6485,
    "malcolm thomas" => 6511,
    "tyrus thomas" => 3032,
    "trey thompkins" => 6473,
    "hollis thompson" => 6634,
    "jason thompson" => 3462,
    "klay thompson" => 6475,
    "mychel thompson" => 6523,
    "tristan thompson" => 6474,
    "marcus thornton" => 4017,
    "jamaal tinsley" => 1024,
    "anthony tolliver" => 3276,
    "p.j. tucker" => 3033,
    "ronny turiaf" => 2789,
    "hedo turkoglu" => 862,
    "izzet turkyilmaz" => 6627,
    "evan turner" => 4239,
    "jeremy tyler" => 6476,
    "edwin ubiles" => 6518,
    "ekpe udoh" => 4261,
    "ime udoka" => 866,
    "beno udrih" => 2448,
    "ben uzoh" => 4296,
    "jonas valanciunas" => 6477,
    "anderson varejao" => 2419,
    "greivis vasquez" => 4291,
    "jan vesely" => 4165,
    "charlie villanueva" => 2792,
    "nikola vucevic" => 6478,
    "dwyane wade" => 1987,
    "von wafer" => 2793,
    "dion waiters" => 6628,
    "bill walker" => 3464,
    "kemba walker" => 6479,
    "john wall" => 4237,
    "ben wallace" => 885,
    "gerald wallace" => 1026,
    "luke walton" => 2027,
    "brad wanamaker" => 6507,
    "hakim warrick" => 2794,
    "darryl watkins" => 3290,
    "c.j. watson" => 3277,
    "earl watson" => 1027,
    "maalik wayns" => 6638,
    "martell webster" => 2795,
    "bonzi wells" => 901,
    "david west" => 2177,
    "delonte west" => 2422,
    "russell westbrook" => 3468,
    "d.j. white" => 3469,
    "james white" => 3037,
    "royce white" => 6629,
    "terrico white" => 4245,
    "hassan whiteside" => 4262,
    "chris wilcox" => 1731,
    "damien wilkins" => 2506,
    "deron williams" => 2798,
    "derrick williams" => 6480,
    "elliot williams" => 4294,
    "jordan williams" => 6481,
    "lou williams" => 2799,
    "marvin williams" => 2797,
    "mo williams" => 2178,
    "reggie williams" => 4229,
    "sean williams" => 3239,
    "shawne williams" => 3038,
    "shelden williams" => 3040,
    "terrence williams" => 4019,
    "jeremy wise" => 6500,
    "metta world peace" => 25,
    "brandan wright" => 3242,
    "chris wright" => 6501,
    "dorell wright" => 2423,
    "tony wroten" => 6630,
    "nick young" => 3243,
    "sam young" => 4020,
    "thaddeus young" => 3244,
    "luke zeller" => 6502,
    "tyler zeller" => 6631,
    "tomislav zubcic" => 6632,
);

my %nbaTeams = (
    "cavaliers" => 5,
    "cleveland cavaliers" => 5,
    "nuggets" => 7,
    "denver nuggets" => 7,
    "celtics" => 2,
    "boston celtics" => 2,
    "hawks" => 1,
    "atlanta hawks" => 1,
    "warriors" => 9,
    "golden state warriors" => 9,
    "mavericks" => 6,
    "dallas mavericks" => 6,
    "hornets" => 3,
    "new orleans hornets" => 3,
    "pacers" => 1,
    "indiana pacers" => 1,
    "all-stars" => 9,
    "west all-stars" => 9,
);

triggers any => keys %nbaPlayers, keys %nbaTeams;

spice to => 'http://api.espn.com/v1/sports/$1/$2/$3/$4/$5'
            . '?enable=stats,competitors,roster,venues&$6='
            . (localtime->year() + 1900)
            . '&apikey={{ENV{DDG_SPICE_ESPN_APIKEY}}}&callback=$7';

spice from => '(.*)/(.*)/(.*)/(.*)/(.*)/(.*)/(.*)';

spice is_cached => 0;

handle query_lc => sub {
    s/^the\s*//g;
    return "basketball", "nba", "athletes", $nbaPlayers{$_}, "foo", "bar", "ddg_spice_espn"
        if exists $nbaPlayers{$_};
    return "basketball", "nba", "teams", $nbaTeams{$_}, "foo", "bar", "ddg_spice_espn_team_query"
        if exists $nbaTeams{$_};
};

1;
